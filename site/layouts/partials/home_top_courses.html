{{- $courses := site.Data.course_index.courses -}}
{{- if not $courses -}}
  <div>courses (0)</div>
{{- else -}}
  {{- $list := slice -}}
  {{- range $code, $c := $courses -}}
    {{- $pp := int (index $c "total_pain_point_posts") -}}
    {{- $row := merge $c (dict "course_code" $code "pp_int" $pp) -}}
    {{- $list = $list | append $row -}}
  {{- end -}}
  {{- $sorted := sort $list "pp_int" "desc" -}}

  <div>courses ({{ len $sorted }})</div>
  <ul>
    {{- range first 6 $sorted -}}
      <li>
        <a href="{{ (printf "courses/%s/" .course_code) | absURL }}">
          {{ .course_code }} â€“ {{ index . "course_title" }}
        </a>
      </li>
    {{- end -}}
  </ul>
{{- end -}}